import{_ as c}from"./index-DwBmvOJp.js";const R=t=>{Promise.all([c(()=>import("https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js"),[]),c(()=>import("https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js"),[])]).then(([e,p])=>{const{initializeApp:f}=e,{getDatabase:l,ref:o,set:b,onValue:d,onDisconnect:m,remove:_}=p,D=f({apiKey:"AIzaSyDZMCYEs9EGTjHKCFKkFAx-qB5dDzmxHMM",authDomain:"online-now-f1628.firebaseapp.com",databaseURL:"https://online-now-f1628-default-rtdb.europe-west1.firebasedatabase.app",projectId:"online-now-f1628",storageBucket:"online-now-f1628.firebasestorage.app",messagingSenderId:"876159780240",appId:"1:876159780240:web:3969ef80b224b54ff69f15",measurementId:"G-VXJMJP1Z87"}),n=l(D),I=crypto.randomUUID&&crypto.randomUUID()||`${Date.now()}-${Math.random().toString(16).slice(2)}`,r=o(n,`presence/${I}`),s=()=>b(r,Date.now());s(),m(r).remove(),setInterval(s,25e3);const w=o(n,"presence"),u=6e4;d(w,g=>{const v=g.val()||{},E=Date.now();let a=0;for(const[A,i]of Object.entries(v))typeof i=="number"&&E-i<=u?a++:_(o(n,`presence/${A}`));t(a)})}).catch(e=>{console.error("Firebase init error:",e),t(0)})};export{R as initOnlineTracker};
